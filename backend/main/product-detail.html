<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>Detail produktu</title>
</head>
<body>
  <h1>Detail produktu</h1>

  <div id="content">Načítám…</div>

  <br>
  <a href="products.html">← Zpět na seznam</a>

  <script>
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    const content = document.getElementById("content");

    async function loadProduct() {
      try {
        const res = await fetch(`http://localhost:8000/products/${id}`);
        const p = await res.json();

        const imgSrc = p.image_url || 'https://via.placeholder.com/300x200?text=Bez+obrazku';

        content.innerHTML = `
          <h2>${p.name}</h2>
          <img src="${imgSrc}" alt="${p.name}" width="300" height="200">
          <p><strong>Cena:</strong> ${p.price ?? "neznámá"} Kč</p>
          <p><strong>Kategorie:</strong> ${p.category}</p>
          <p><strong>Značka:</strong> ${p.brand ?? "-"}</p>
          <p><strong>Popis:</strong><br>${p.description ?? "Bez popisu"}</p>
          <p><a href="${p.url}" target="_blank">Otevřít na eshopu</a></p>
        `;
      } catch (err) {
        console.error(err);
        content.innerHTML = "Chyba při načítání produktu.";
      }
    }

    loadProduct();
  </script>
</body>
</html>
